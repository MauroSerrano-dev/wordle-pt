import Head from 'next/head'
import Image from 'next/image'
import { useEffect, useState } from 'react'
import styles from '../styles/Home.module.css'

const ALPHABETO = 'abcdefghijklmnopqrstuvwxyz'
const WORDS = [
  'sagaz',
  'âmago',
  'negro',
  'êxito',
  'mexer',
  'termo',
  'nobre',
  'senso',
  'algoz',
  'afeto',
  'ética',
  'plena',
  'mútua',
  'tênue',
  'sutil',
  'vigor',
  'fazer',
  'aquém',
  'porém',
  'assim',
  'audaz',
  'seção',
  'sanar',
  'inato',
  'fosse',
  'cerne',
  'ideia',
  'poder',
  'moral',
  'desde',
  'muito',
  'justo',
  'torpe',
  'honra',
  'sobre',
  'quiçá',
  'fútil',
  'anexo',
  'razão',
  'etnia',
  'ícone',
  'sonho',
  'tange',
  'égide',
  'amigo',
  'lapso',
  'mútuo',
  'expor',
  'haver',
  'casal',
  'hábil',
  'tempo',
  'dengo',
  'seara',
  'então',
  'pesar',
  'ávido',
  'ardil',
  'boçal',
  'genro',
  'posse',
  'coser',
  'causa',
  'pária',
  'dizer',
  'corja',
  'prole',
  'brado',
  'dever',
  'tenaz',
  'saber',
  'graça',
  'óbice',
  'detém',
  'crivo',
  'ápice',
  'digno',
  'ânimo',
  'ânsia',
  'comum',
  'ceder',
  'temor',
  'sendo',
  'culto',
  'assaz',
  'gleba',
  'atroz',
  'pauta',
  'mundo',
  'ainda',
  'censo',
  'fugaz',
  'estar',
  'valha',
  'cozer',
  'vício',
  'forte',
  'denso',
  'neném',
  'vulgo',
  'revés',
  'pudor',
  'regra',
  'dogma',
  'louco',
  'criar',
  'banal',
  'saúde',
  'xibiu',
  'clava',
  'round',
  'jeito',
  'atrás',
  'impor',
  'ordem',
  'pedir',
  'mercê',
  'pífio',
  'tenro',
  'apraz',
  'desse',
  'reaça',
  'usura',
  'feliz',
  'homem',
  'prosa',
  'servo',
  'sábio',
  'juízo',
  'coisa',
  'viril',
  'mesmo',
  'presa',
  'ontem',
  'manso',
  'cunho',
  'forma',
  'falar',
  'devir',
  'limbo',
  'meiga',
  'afago',
  'fluir',
  'ébrio',
  'posso',
  'vendo',
  'platô',
  'sério',
  'guisa',
  'mágoa',
  'herói',
  'visar',
  'acaso',
  'puder',
  'temer',
  'valor',
  'certo',
  'pleno',
  'cisma',
  'lugar',
  'ímpio',
  'afins',
  'bruma',
  'óbvio',
  'êxodo',
  'gerar',
  'todos',
  'obter',
  'crise',
  'matiz',
  'praxe',
  'senil',
  'garbo',
  'abrir',
  'havia',
  'fluxo',
  'vênia',
  'falso',
  'enfim',
  'tédio',
  'ritmo',
  'fácil',
  'união',
  'legal',
  'álibi',
  'tomar',
  'visão',
  'burro',
  'pulha',
  'parvo',
  'valia',
  'reter',
  'bravo',
  'vital',
  'favor',
  'prumo',
  'grato',
  'olhar',
  'gênio',
  'vivaz',
  'laico',
  'parco',
  'levar',
  'casta',
  'reles',
  'possa',
  'morte',
  'ameno',
  'tecer',
  'óbito',
  'prime',
  'ranço',
  'noção',
  'selar',
  'sábia',
  'falta',
  'fator',
  'anelo',
  'façam',
  'noite',
  'linda',
  'cabal',
  'achar',
  'rogar',
  'farsa',
  'brega',
  'nicho',
  'citar',
  'coeso',
  'ouvir',
  'viver',
  'adiar',
  'épico',
  'cisão',
  'fardo',
  'força',
  'ativo',
  'ajuda',
  'sinto',
  'passo',
  'gente',
  'calma',
  'haste',
  'sonso',
  'tendo',
  'leigo',
  'único',
  'dúbio',
  'exato',
  'amplo',
  'imune',
  'cesta',
  'sesta',
  'pobre',
  'carma',
  'sulco',
  'lavra',
  'rever',
  'outro',
  'revel',
  'deter',
  'humor',
  'vemos',
  'labor',
  'gesto',
  'árduo',
  'tende',
  'ciúme',
  'atuar',
  'feixe',
  'velho',
  'claro',
  'ótica',
  'igual',
  'ponto',
  'ideal',
  'hiato',
  'toada',
  'sonsa',
  'débil',
  'vácuo',
  'terno',
  'ambos',
  'terra',
  'varão',
  'remir',
  'cauda',
  'marco',
  'fonte',
  'senão',
  'jovem',
  'fusão',
  'capaz',
  'probo',
  'inata',
  'leito',
  'líder',
  'advém',
  'ficar',
  'horda',
  'doido',
  'xeque',
  'tenra',
  'farão',
  'relva',
  'velar',
  'algum',
  'série',
  'vazio',
  'apoio',
  'coçar',
  'caçar',
  'tanto',
  'entre',
  'pouco',
  'vimos',
  'anuir',
  'papel',
  'frase',
  'rigor',
  'verso',
  'sente',
  'botar',
  'raiva',
  'coesa',
  'dorso',
  'signo',
  'cruel',
  'massa',
  'torço',
  'feito',
  'moção',
  'prece',
  'minha',
  'fauna',
  'ambas',
  'morar',
  'credo',
  'preso',
  'casto',
  'covil',
  'peste',
  'ímpar',
  'brisa',
  'vírus',
  'ciclo',
  'lazer',
  'faina',
  'furor',
  'blasé',
  'chata',
  'dócil',
  'maior',
  'flora',
  'nossa',
  'trama',
  'árido',
  'vetor',
  'pegar',
  'houve',
  'adeus',
  'chuva',
  'beata',
  'aceso',
  'manha',
  'setor',
  'banzo',
  'seita',
  'liame',
  'meses',
  'vulto',
  'senda',
  'livro',
  'breve',
  'ardor',
  'salvo',
  'vasto',
  'sorte',
  'pecha',
  'peixe',
  'birra',
  'visse',
  'carro',
  'morro',
  'comer',
  'plano',
  'antro',
  'saiba',
  'prado',
  'reger',
  'átomo',
  'ocaso',
  'nunca',
  'segue',
  'rezar',
  'pajem',
  'aliás',
  'avaro',
  'saída',
  'ótimo',
  'junto',
  'áureo',
  'séria',
  'mudar',
  'chulo',
  'sinal',
  'acima',
  'serão',
  'anciã',
  'opção',
  'lenda',
  'parar',
  'fruir',
  'fitar',
  'treta',
  'grupo',
  'jazia',
  'nação',
  'fugir',
  'andar',
  'brava',
  'leite',
  'bando',
  'puxar',
  'campo',
  'prazo',
  'gerir',
  'rapaz',
  'parte',
  'norma',
  'tosco',
  'alude',
  'motim',
  'tenso',
  'época',
  'ídolo',
  'sinhá',
  'praia',
  'exame',
  'tirar',
  'arcar',
  'agora',
  'vilão',
  'avião',
  'risco',
  'psico',
  'reino',
  'malta',
  'anais',
  'praga',
  'venal',
  'antes',
  'índio',
  'quota',
  'soldo',
  'aonde',
  'corpo',
  'logro',
  'preto',
  'sumir',
  'quase',
  'traga',
  'cheio',
  'voraz',
  'texto',
  'filho',
  'fixar',
  'pompa',
  'certa',
  'virão',
  'prova',
  'turba',
  'cópia',
  'apego',
  'estão',
  'oásis',
  'conta',
  'exijo',
  'verbo',
  'nódoa',
  'acesa',
  'alado',
  'caixa',
  'solto',
  'áurea',
  'ligar',
  'turva',
  'messe',
  'festa',
  'nível',
  'átrio',
  'perda',
  'coito',
  'grave',
  'tocar',
  'manhã',
  'apelo',
  'oxalá',
  'verve',
  'lindo',
  'doído',
  'fraco',
  'parva',
  'livre',
  'pardo',
  'trupe',
  'afora',
  'fatos',
  'dessa',
  'parca',
  'opaco',
  'mente',
  'fatal',
  'fenda',
  'sabia',
  'alçar',
  'jirau',
  'tinha',
  'navio',
  'viria',
  'elite',
  'magia',
  'astro',
  'lidar',
  'faixa',
  'firme',
  'ficha',
  'glosa',
  'ético',
  'retém',
  'autor',
  'supra',
  'grata',
  'bater',
  'verba',
  'reses',
  'cioso',
  'pique',
  'salve',
  'calda',
  'longe',
  'junco',
  'cousa',
  'deixa',
  'privê',
  'atual',
  'vezes',
  'douto',
  'irmão',
  'macio',
  'pagão',
  'sexta',
  'bicho',
  'molho',
  'sarça',
  'posto',
  'torso',
  'abriu',
  'supor',
  'light',
  'porta',
  'cânon',
  'extra',
  'judeu',
  'curso',
  'locus',
  'caber',
  'asilo',
  'besta',
  'turvo',
  'ígneo',
  'bioma',
  'órfão',
  'nosso',
  'abuso',
  'drops',
  'rádio',
  'desta',
  'rouca',
  'vosso',
  'vídeo',
  'combo',
  'zelar',
  'pisar',
  'ruína',
  'culpa',
  'júlia',
  'bônus',
  'vinha',
  'menos',
  'baixo',
  'agudo',
  'ereto',
  'paira',
  'finda',
  'advir',
  'calão',
  'gosto',
  'estio',
  'facto',
  'feudo',
  'super',
  'facho',
  'traço',
  'sítio',
  'cútis',
  'urgia',
  'suave',
  'meigo',
  'surja',
  'tetra',
  'amena',
  'turma',
  'pilar',
  'tento',
  'autos',
  'rumor',
  'louça',
  'chama',
  'cocho',
  'ações',
  'clean',
  'museu',
  'lápis',
  'mosto',
  'pífia',
  'local',
  'acolá',
  'pódio',
  'lasso',
  'geral',
  'hobby',
  'optar',
  'boato',
  'medir',
  'aluno',
  'refém',
  'brabo',
  'drama',
  'páreo',
  'rubro',
  'peito',
  'chato',
  'pacto',
  'mesma',
  'folga',
  'crime',
  'poema',
  'ponha',
  'piada',
  'metiê',
  'ávida',
  'letal',
  'penta',
  'móvel',
  'cacho',
  'feroz',
  'teste',
  'vigia',
  'golpe',
  'aroma',
  'coral',
  'hoste',
  'monte',
  'pasmo',
  'vetar',
  'açude',
  'clima',
  'rival',
  'poeta',
  'fazia',
  'passa',
  'cover',
  'riste',
  'troça',
  'ecoar',
  'verde',
  'daqui',
  'cetro',
  'lição',
  'finjo',
  'forem',
  'fórum',
  'carta',
  'axila',
  'tacha',
  'monge',
  'plebe',
  'artur',
  'ateia',
  'calmo',
  'busca',
  'súcia',
  'lesse',
  'ébano',
  'escol',
  'idoso',
  'tribo',
  'plumo',
  'briga',
  'falha',
  'swing',
  'roupa',
  'venha',
  'conto',
  'aviso',
  'macro',
  'tarde',
  'plaga',
  'sarau',
  'perco',
  'cargo',
  'chefe',
  'fruto',
  'viram',
  'farta',
  'átimo',
  'vento',
  'légua',
  'amiga',
  'civil',
  'grama',
  'berro',
  'única',
  'virar',
  'manga',
  'pedra',
  'arado',
  'catre',
  'ornar',
  'seixo',
  'saldo',
  'surto',
  'ímpia',
  'corso',
  'casar',
  'bença',
  'sósia',
  'troca',
  'traje',
  'beijo',
  'fosso',
  'nuvem',
  'estro',
  'assar',
  'bruta',
  'mangá',
  'magna',
  'úteis',
  'gíria',
  'tiver',
  'deste',
  'itens',
  'recém',
  'trato',
  'porte',
  'pinho',
  'tição',
  'vedar',
  'vazão',
  'tutor',
  'depor',
  'amado',
  'arfar',
  'canso',
  'silvo',
  'bazar',
  'irado',
  'âmbar',
  'renda',
  'jejum',
  'perto',
  'deram',
  'grota',
  'gabar',
  'cifra',
  'mídia',
  'bruto',
  'rural',
  'amada',
  'inter',
  'má-fé',
  'feita',
  'areia',
  'laudo',
  'pavor',
  'órgão',
  'tchau',
  'nesse',
  'régio',
  'bucho',
  'pasma',
  'clero',
  'fossa',
  'segar',
  'odiar',
  'minar',
  'stand',
  'vadio',
  'meche',
  'vagar',
  'pomar',
  'troco',
  'molde',
  'rocha',
  'mamãe',
  'aviar',
  'sótão',
  'negar',
  'canto',
  'close',
  'xucro',
  'guria',
  'cenho',
  'lesão',
  'lesto',
  'visto',
  'cinto',
  'bolsa',
  'jogar',
  'densa',
  'proto',
  'largo',
  'paiol',
  'morfo',
  'horto',
  'marca',
  'chula',
  'invés',
  'ruído',
  'ileso',
  'pugna',
  'vista',
  'penso',
  'urdir',
  'volta',
  'podar',
  'dúbia',
  'ufano',
  'vasta',
  'cheia',
  'mocho',
  'cível',
  'frota',
  'varoa',
  'úbere',
  'bulir',
  'úmido',
  'tenha',
  'piche',
  'santo',
  'linha',
  'logos',
  'velha',
  'esgar',
  'culta',
  'apear',
  'ágape',
  'resto',
  'cerca',
  'fundo',
  'nessa',
  'ferpa',
  'peita',
  'verão',
  'pólis',
  'natal',
  'misto',
  'narco',
  'manto',
  'etapa',
  'nesta',
  'jazer',
  'monta',
  'símio',
  'canil',
  'coroa',
  'demão',
  'letra',
  'preço',
  'ardis',
  'ceita',
  'trago',
  'chaga',
  'barão',
  'final',
  'findo',
  'gemer',
  'campa',
  'troço',
  'matar',
  'mover',
  'lábia',
  'álamo',
  'fazes',
  'álbum',
  'cosmo',
  'seiva',
  'banto',
  'redor',
  'venho',
  'folia',
  'todas',
  'porca',
  'retro',
  'áudio',
  'barro',
  'folha',
  'punha',
  'dança',
  'salmo',
  'axial',
  'sabor',
  'bolso',
  'louro',
  'burra',
  'limpo',
  'queda',
  'farol',
  'rente',
  'lousa',
  'calça',
  'calor',
  'arroz',
  'firma',
  'salva',
  'neste',
  'lutar',
  'sigla',
  'mimar',
  'coevo',
  'torna',
  'enjoo',
  'baixa',
  'míope',
  'solta',
  'calvo',
  'veloz',
  'macho',
  'ousar',
  'fugiu',
  'justa',
  'tumba',
  'gueto',
  'zumbi',
  'logia',
  'longo',
  'corar',
  'nácar',
  'chave',
  'reler',
  'vazia',
  'bedel',
  'forro',
  'fátuo',
  'penca',
  'farto',
  'vário',
  'cacto',
  'obtém',
  'sinta',
  'sexto',
  'lucro',
  'mania',
  'repor',
  'subir',
  'sugar',
  'quite',
  'urgir',
  'custo',
  'puído',
  'passe',
  'ultra',
  'staff',
  'valer',
  'sofia',
  'sadio',
  'louca',
  'nariz',
  'mimos',
  'versa',
  'harém',
  'cardo',
  'viger',
  'usual',
  'refil',
  'hífen',
  'lento',
  'árdua',
  'dados',
  'modal',
  'sócio',
  'corte',
  'outra',
  'rédea',
  'choça',
  'ferir',
  'ceifa',
  'garra'
]

const LETTER = {
  value: '',
  focus: false
}

export default function Home() {
  const [guessIndex, setGuessIndex] = useState(0)
  const [word, setWord] = useState('')
  const [guesses, setGuesses] = useState(Array(5).fill(Array(5).fill(LETTER)))

  useEffect(() => {
    setWord(WORDS[Math.floor(Math.random() * WORDS.length)])
  }, []);

  function handleFocus(iLetter: number) {
    clearFocus()
    setGuesses((prev: Array<Array<any>>) =>
      prev.map((word: Array<any>, iW: number) =>
        iW === guessIndex
          ? word.map((letter: any, iL: number) => iL === iLetter ? { ...letter, focus: true } : letter)
          : word))
  }

  function clearFocus() {
    setGuesses((prev: Array<Array<any>>) =>
      prev.map((word: Array<any>) =>
        word.map((letter: any) => letter.focus ? { ...letter, focus: false } : letter)))
  }

  function handleKeyboard(event: { nativeEvent: { key: string } }) {
    const key = event.nativeEvent.key
    setGuesses((prev: Array<Array<any>>) =>
      prev.map((word: Array<any>, iW: number) =>
        iW === guessIndex
          ? word.map((letter: any) =>
            letter.focus && key === 'Backspace'
              ? ''
              : (letter.focus && ALPHABETO.includes(key.toLowerCase())
                ? { ...letter, value: key }
                : letter))
          : word))
  }

  return (
    <div className={styles.container} onKeyDown={(event: any) => handleKeyboard(event)} >
      <Head>
        <title>Wordle</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main className={styles.main}>
        <h1 className={styles.title}>
          Wordle
        </h1>

        <div className={styles.game}>
          {guesses.map((guess: Array<any>, i: number) => <div className={styles.guess} key={`guess ${i + 1}`}>
            {guess.map((letter: any, j: number) => <button disabled={i !== guessIndex} style={{ backgroundColor: guesses[i][j].focus ? 'blue' : 'grey' }} onClick={() => handleFocus(j)} className={styles.letter} key={`letter ${j + 1}`}>
              {letter.value}
            </button>)}
          </div>)}
        </div>
      </main>

      <footer className={styles.footer}>
        <a
          href="https://vercel.com?utm_source=create-next-app&utm_medium=default-template&utm_campaign=create-next-app"
          target="_blank"
          rel="noopener noreferrer"
        >
          Powered by{' '}
          <span className={styles.logo}>
            <Image src="/vercel.svg" alt="Vercel Logo" width={72} height={16} />
          </span>
        </a>
      </footer>
    </div>
  )
}
